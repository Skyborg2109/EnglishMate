<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - EnglishMate</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #5BA8E8 0%, #7EC4F3 50%, #A8D8F5 100%);
            min-height: 100vh;
            position: relative;
        }

        /* Background Decorations */
        .bg-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        .star-1 {
            width: 4px;
            height: 4px;
            top: 15%;
            left: 10%;
            animation-delay: 0s;
        }

        .star-2 {
            width: 3px;
            height: 3px;
            top: 25%;
            right: 15%;
            animation-delay: 1s;
        }

        .star-3 {
            width: 5px;
            height: 5px;
            top: 50%;
            left: 8%;
            animation-delay: 2s;
        }

        .star-4 {
            width: 4px;
            height: 4px;
            bottom: 25%;
            right: 12%;
            animation-delay: 1.5s;
        }

        .star-5 {
            width: 3px;
            height: 3px;
            top: 70%;
            left: 20%;
            animation-delay: 0.5s;
        }

        .star-6 {
            width: 6px;
            height: 6px;
            top: 35%;
            right: 25%;
            animation-delay: 2.5s;
        }

        .star-7 {
            width: 4px;
            height: 4px;
            bottom: 15%;
            left: 15%;
            animation-delay: 1.8s;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .shape {
            position: absolute;
            opacity: 0.15;
        }

        .triangle-1 {
            width: 0;
            height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 150px solid white;
            top: 8%;
            right: 10%;
            transform: rotate(15deg);
        }

        .triangle-2 {
            width: 0;
            height: 0;
            border-left: 70px solid transparent;
            border-right: 70px solid transparent;
            border-bottom: 100px solid white;
            bottom: 15%;
            left: 5%;
            transform: rotate(-25deg);
        }

        .circle-1 {
            width: 150px;
            height: 150px;
            border: 5px solid white;
            border-radius: 50%;
            top: 10%;
            right: 5%;
        }

        .diamond {
            width: 100px;
            height: 100px;
            background: white;
            transform: rotate(45deg);
            bottom: 20%;
            right: 8%;
        }


        /* Hamburger Menu */
        .hamburger {
            display: none;
            cursor: pointer;
            width: 30px;
            height: 20px;
            position: relative;
            z-index: 101;
        }

        .hamburger span {
            display: block;
            width: 100%;
            height: 3px;
            background: white;
            position: absolute;
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .hamburger span:nth-child(1) {
            top: 0;
        }

        .hamburger span:nth-child(2) {
            top: 50%;
            transform: translateY(-50%);
        }

        .hamburger span:nth-child(3) {
            bottom: 0;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg);
            top: 9px;
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg);
            top: 9px;
            bottom: auto;
        }

        /* Navigation */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 5%;
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-menu {
            display: flex;
            gap: 2.5rem;
            list-style: none;
            align-items: center;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-menu a::before {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: white;
            transition: width 0.3s ease;
        }

        .nav-menu a:hover::before {
            width: 100%;
        }

        .nav-menu a:hover {
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 1.1rem;
        }

        /* Main Content */
        .quiz-container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 100px);
            padding: 2rem 5%;
        }

        .quiz-title {
            font-size: 5rem;
            font-weight: 800;
            color: white;
            text-align: center;
            margin-bottom: 0.5rem;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.15);
            animation: fadeInDown 0.8s ease;
        }

        .quiz-subtitle {
            font-size: 1.3rem;
            font-weight: 400;
            color: white;
            text-align: center;
            margin-bottom: 3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: fadeInDown 0.8s ease 0.1s backwards;
        }

        /* Question Container */
        .question-container {
            max-width: 700px;
            width: 100%;
            animation: fadeInUp 0.8s ease 0.2s backwards;
        }

        .question-text {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Answer Options */
        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            margin-bottom: 2rem;
        }

        .answer-option {
            position: relative;
        }

        .answer-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .answer-label {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            background: rgba(255, 255, 255, 0.85);
            padding: 1.5rem 2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .answer-label:hover {
            background: rgba(255, 255, 255, 0.95);
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-option input[type="radio"]:checked+.answer-label {
            background: white;
            box-shadow: 0 8px 30px rgba(91, 168, 232, 0.3);
        }

        .radio-custom {
            width: 30px;
            height: 30px;
            border: 3px solid #5BA8E8;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .radio-custom::after {
            content: '';
            width: 16px;
            height: 16px;
            background: #5BA8E8;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .answer-option input[type="radio"]:checked+.answer-label .radio-custom::after {
            opacity: 1;
        }

        .answer-text {
            font-size: 1.6rem;
            font-weight: 600;
            color: #5BA8E8;
            flex: 1;
        }

        /* Submit Button */
        .submit-button {
            background: white;
            color: #5BA8E8;
            padding: 1.3rem 6rem;
            border-radius: 50px;
            font-size: 2rem;
            font-weight: 800;
            text-decoration: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            animation: fadeInUp 0.8s ease 0.4s backwards;
        }

        .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(91, 168, 232, 0.4);
        }

        .quiz-navigation {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .nav-button {
            background: rgba(91, 168, 232, 0.2);
            color: #5BA8E8;
            padding: 1rem 2.5rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            border: 2px solid #5BA8E8;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .nav-button:hover {
            background: #5BA8E8;
            color: white;
            transform: translateY(-2px);
        }

        .result-container {
            text-align: center;
            padding: 3rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-top: 2rem;
        }

        .result-container h2 {
            font-size: 2.5rem;
            color: #5BA8E8;
            margin-bottom: 1.5rem;
        }

        .result-container p {
            font-size: 1.5rem;
            margin: 1rem 0;
            color: #333;
        }

        .result-container .nav-button {
            margin: 0.5rem;
        }

        /* Result Message */
        .result-message {
            margin-top: 2rem;
            padding: 1.5rem 3rem;
            border-radius: 20px;
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .result-message.correct {
            background: rgba(76, 175, 80, 0.9);
            color: white;
            display: block;
        }

        .result-message.incorrect {
            background: rgba(244, 67, 54, 0.9);
            color: white;
            display: block;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 80px;
            }

            .navbar {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 1000;
                background: rgba(91, 168, 232, 0.95);
                backdrop-filter: blur(10px);
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .hamburger {
                display: block;
            }

            .nav-menu {
                position: fixed;
                top: 0;
                right: -100%;
                width: 100%;
                height: 100vh;
                background: rgba(91, 168, 232, 0.98);
                backdrop-filter: blur(10px);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                transition: right 0.3s ease;
                z-index: 99;
                gap: 2.5rem;
            }

            .nav-menu.active {
                right: 0;
            }

            .nav-menu a {
                font-size: 1.5rem;
            }

            .quiz-title {
                font-size: 3.5rem;
            }

            .quiz-subtitle {
                font-size: 1.1rem;
            }

            .question-text {
                font-size: 1.6rem;
            }

            .answer-label {
                padding: 1.2rem 1.5rem;
            }

            .answer-text {
                font-size: 1.3rem;
            }

            .submit-button {
                padding: 1.1rem 4rem;
                font-size: 1.6rem;
            }
        }

        @media (max-width: 480px) {
            .navbar {
                /* Removed problematic flex-direction and padding to fix mobile layout */
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .quiz-title {
                font-size: 2.5rem;
            }

            .quiz-subtitle {
                font-size: 1rem;
            }

            .question-text {
                font-size: 1.3rem;
            }

            .answer-label {
                padding: 1rem 1.2rem;
            }

            .radio-custom {
                width: 25px;
                height: 25px;
            }

            .radio-custom::after {
                width: 13px;
                height: 13px;
            }

            .answer-text {
                font-size: 1.1rem;
            }

            .submit-button {
                padding: 1rem 3rem;
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>
    <!-- Background Decorations -->
    <div class="bg-decoration">
        <div class="star star-1"></div>
        <div class="star star-2"></div>
        <div class="star star-3"></div>
        <div class="star star-4"></div>
        <div class="star star-5"></div>
        <div class="star star-6"></div>
        <div class="star star-7"></div>

        <div class="shape triangle-1"></div>
        <div class="shape triangle-2"></div>
        <div class="shape circle-1"></div>
        <div class="shape diamond"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">EnglishMate</div>
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul class="nav-menu">
            <li><a href="Dashboard.html">Dashboard</a></li>
            <li><a href="Courses.html">Courses</a></li>
            <li><a href="Dictionary.html">Dictionary</a></li>
            <li><a href="Quiz.html">Quiz</a></li>
            <li><a href="#" onclick="handleLogout(); return false;">Logout</a></li>
        </ul>
    </nav>

    <!-- Quiz Content -->
    <div class="quiz-container">
        <h1 class="quiz-title">Quiz</h1>
        <p class="quiz-subtitle" id="quizSubtitle">Choose the correct answer!</p>

        <div class="question-container" id="questionContainer">
            <!-- Questions will be loaded dynamically -->
        </div>

        <div class="quiz-navigation">
            <button class="nav-button" id="prevBtn" onclick="previousQuestion()" style="display: none;">‚Üê
                Previous</button>
            <button class="nav-button" id="nextBtn" onclick="nextQuestion()">Next ‚Üí</button>
            <button class="submit-button" id="submitBtn" onclick="submitQuiz()" style="display: none;">Submit
                Quiz</button>
        </div>

        <div id="resultContainer" class="result-container" style="display: none;">
            <h2 id="resultTitle"></h2>
            <p id="resultScore"></p>
            <p id="resultMessage"></p>
            <button class="nav-button" onclick="restartQuiz()">Try Again</button>
            <button class="nav-button" onclick="window.location.href='Dashboard.html'">Back to Dashboard</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration -->
    <script src="../firebase-config.js"></script>

    <script>
        function toggleMenu() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        }

        // Check if user is logged in
        firebase.auth().onAuthStateChanged(function (user) {
            if (!user) {
                window.location.href = 'login.html';
            }
        });

        // Logout function
        function handleLogout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                firebase.auth().signOut().then(() => {
                    window.location.href = 'login.html';
                }).catch((error) => {
                    console.error('Logout error:', error);
                    alert('Terjadi kesalahan saat logout. Silakan coba lagi.');
                });
            }
        }

        // Quiz data for all topics
        const quizData = {
            'simple-present': {
                title: 'Simple Present Tense Quiz',
                questions: [
                    { question: 'She _____ to school every day.', options: ['go', 'goes', 'going', 'gone'], answer: 1 },
                    { question: 'They _____ English very well.', options: ['speaks', 'speak', 'speaking', 'spoke'], answer: 1 },
                    { question: 'I _____ coffee in the morning.', options: ['drinks', 'drink', 'drinking', 'drank'], answer: 1 },
                    { question: 'He _____ his homework every night.', options: ['do', 'does', 'doing', 'did'], answer: 1 },
                    { question: 'The sun _____ in the east.', options: ['rise', 'rises', 'rising', 'rose'], answer: 1 },
                    { question: 'We _____ soccer on weekends.', options: ['plays', 'play', 'playing', 'played'], answer: 1 },
                    { question: 'She _____ not like vegetables.', options: ['do', 'does', 'is', 'are'], answer: 1 },
                    { question: '_____ you speak French?', options: ['Does', 'Do', 'Is', 'Are'], answer: 1 },
                    { question: 'My brother _____ in a bank.', options: ['work', 'works', 'working', 'worked'], answer: 1 },
                    { question: 'Cats _____ milk.', options: ['likes', 'like', 'liking', 'liked'], answer: 1 }
                ]
            },
            'pronoun': {
                title: 'Pronoun Quiz',
                questions: [
                    { question: '_____ am a student.', options: ['I', 'You', 'He', 'She'], answer: 0 },
                    { question: 'This book is _____. (milik saya)', options: ['my', 'mine', 'me', 'I'], answer: 1 },
                    { question: 'I saw _____ at the mall yesterday.', options: ['he', 'his', 'him', 'himself'], answer: 2 },
                    { question: '_____ are my best friends.', options: ['Them', 'Their', 'They', 'Theirs'], answer: 2 },
                    { question: 'The teacher gave _____ a book.', options: ['I', 'my', 'mine', 'me'], answer: 3 },
                    { question: 'That car is _____. (milik mereka)', options: ['their', 'them', 'they', 'theirs'], answer: 3 },
                    { question: '_____ is a doctor.', options: ['Her', 'Hers', 'She', 'Herself'], answer: 2 },
                    { question: 'Can you help _____?', options: ['we', 'our', 'ours', 'us'], answer: 3 },
                    { question: 'This is _____ house.', options: ['we', 'us', 'our', 'ours'], answer: 2 },
                    { question: '_____ loves to read books.', options: ['Him', 'His', 'He', 'Himself'], answer: 2 }
                ]
            },
            'to-be': {
                title: 'To Be Quiz',
                questions: [
                    { question: 'I _____ a teacher.', options: ['am', 'is', 'are', 'be'], answer: 0 },
                    { question: 'She _____ very happy today.', options: ['am', 'is', 'are', 'be'], answer: 1 },
                    { question: 'They _____ my friends.', options: ['am', 'is', 'are', 'be'], answer: 2 },
                    { question: 'It _____ a beautiful day.', options: ['am', 'is', 'are', 'be'], answer: 1 },
                    { question: 'We _____ students.', options: ['am', 'is', 'are', 'be'], answer: 2 },
                    { question: '_____ you ready?', options: ['Am', 'Is', 'Are', 'Be'], answer: 2 },
                    { question: 'He _____ not at home.', options: ['am', 'is', 'are', 'be'], answer: 1 },
                    { question: 'I _____ not tired.', options: ['am', 'is', 'are', 'be'], answer: 0 },
                    { question: 'The books _____ on the table.', options: ['am', 'is', 'are', 'be'], answer: 2 },
                    { question: '_____ she your sister?', options: ['Am', 'Is', 'Are', 'Be'], answer: 1 }
                ]
            },
            'articles': {
                title: 'Articles Quiz',
                questions: [
                    { question: 'I have _____ apple.', options: ['a', 'an', 'the', '-'], answer: 1 },
                    { question: 'She is _____ teacher.', options: ['a', 'an', 'the', '-'], answer: 0 },
                    { question: '_____ sun is very hot today.', options: ['A', 'An', 'The', '-'], answer: 2 },
                    { question: 'I need _____ umbrella.', options: ['a', 'an', 'the', '-'], answer: 1 },
                    { question: 'He is _____ honest man.', options: ['a', 'an', 'the', '-'], answer: 1 },
                    { question: 'I saw _____ elephant at the zoo.', options: ['a', 'an', 'the', '-'], answer: 1 },
                    { question: 'This is _____ book I told you about.', options: ['a', 'an', 'the', '-'], answer: 2 },
                    { question: 'She goes to _____ school every day.', options: ['a', 'an', 'the', '-'], answer: 3 },
                    { question: 'I live in _____ United States.', options: ['a', 'an', 'the', '-'], answer: 2 },
                    { question: 'He is _____ university student.', options: ['a', 'an', 'the', '-'], answer: 0 }
                ]
            },
            'past-continuous': {
                title: 'Past Continuous Tense Quiz',
                questions: [
                    { question: 'I _____ TV when you called.', options: ['watch', 'was watching', 'were watching', 'watched'], answer: 1 },
                    { question: 'They _____ football at 5 PM yesterday.', options: ['play', 'was playing', 'were playing', 'played'], answer: 2 },
                    { question: 'She _____ a book when I arrived.', options: ['read', 'was reading', 'were reading', 'reads'], answer: 1 },
                    { question: 'We _____ dinner at 7 PM.', options: ['cook', 'was cooking', 'were cooking', 'cooked'], answer: 2 },
                    { question: 'What _____ you doing at that time?', options: ['was', 'were', 'are', 'is'], answer: 1 },
                    { question: 'He _____ not sleeping when I came.', options: ['was', 'were', 'is', 'are'], answer: 0 },
                    { question: 'It _____ raining all day yesterday.', options: ['was', 'were', 'is', 'are'], answer: 0 },
                    { question: 'The children _____ in the park.', options: ['was playing', 'were playing', 'play', 'plays'], answer: 1 },
                    { question: 'I _____ to music while studying.', options: ['was listening', 'were listening', 'listen', 'listens'], answer: 0 },
                    { question: '_____ she working yesterday?', options: ['Was', 'Were', 'Is', 'Are'], answer: 0 }
                ]
            },
            'present-perfect': {
                title: 'Present Perfect Tense Quiz',
                questions: [
                    { question: 'I _____ finished my homework.', options: ['has', 'have', 'had', 'having'], answer: 1 },
                    { question: 'She _____ lived here for 5 years.', options: ['has', 'have', 'had', 'having'], answer: 0 },
                    { question: 'They _____ never been to Paris.', options: ['has', 'have', 'had', 'having'], answer: 1 },
                    { question: 'He _____ just arrived.', options: ['has', 'have', 'had', 'having'], answer: 0 },
                    { question: '_____ you ever eaten sushi?', options: ['Has', 'Have', 'Had', 'Having'], answer: 1 },
                    { question: 'We _____ known each other since 2010.', options: ['has', 'have', 'had', 'having'], answer: 1 },
                    { question: 'She _____ not seen that movie yet.', options: ['has', 'have', 'had', 'having'], answer: 0 },
                    { question: 'I _____ already eaten breakfast.', options: ['has', 'have', 'had', 'having'], answer: 1 },
                    { question: 'How long _____ you studied English?', options: ['has', 'have', 'had', 'having'], answer: 1 },
                    { question: 'The train _____ just left.', options: ['has', 'have', 'had', 'having'], answer: 0 }
                ]
            },
            'modal-verbs': {
                title: 'Modal Verbs Quiz',
                questions: [
                    { question: 'I _____ speak English.', options: ['can', 'cans', 'canning', 'could to'], answer: 0 },
                    { question: 'You _____ study harder.', options: ['should', 'shoulds', 'shoulding', 'should to'], answer: 0 },
                    { question: '_____ I use your phone?', options: ['Can', 'Could', 'May', 'All correct'], answer: 3 },
                    { question: 'She _____ be at home now.', options: ['might', 'mights', 'mighting', 'might to'], answer: 0 },
                    { question: 'You _____ wear a seatbelt.', options: ['must', 'musts', 'musting', 'must to'], answer: 0 },
                    { question: 'We _____ go to the party tomorrow.', options: ['will', 'wills', 'willing', 'will to'], answer: 0 },
                    { question: '_____ you like some coffee?', options: ['Will', 'Would', 'Should', 'Must'], answer: 1 },
                    { question: 'He _____ swim when he was young.', options: ['can', 'could', 'may', 'might'], answer: 1 },
                    { question: 'You _____ not smoke here.', options: ['must', 'musts', 'musting', 'must to'], answer: 0 },
                    { question: 'It _____ rain tomorrow.', options: ['may', 'mays', 'maying', 'may to'], answer: 0 }
                ]
            },
            'conditional': {
                title: 'Conditional Sentences Quiz',
                questions: [
                    { question: 'If it rains, I _____ stay at home.', options: ['will', 'would', 'will be', 'would be'], answer: 0 },
                    { question: 'If I _____ rich, I would travel the world.', options: ['am', 'was', 'were', 'be'], answer: 2 },
                    { question: 'If you heat water to 100¬∞C, it _____.', options: ['will boil', 'boils', 'would boil', 'boiled'], answer: 1 },
                    { question: 'If I _____ you, I would accept the offer.', options: ['am', 'was', 'were', 'be'], answer: 2 },
                    { question: 'If she _____ harder, she will pass the exam.', options: ['study', 'studies', 'studied', 'would study'], answer: 1 },
                    { question: 'If I had known, I _____ come.', options: ['will', 'would', 'would have', 'will have'], answer: 2 },
                    { question: 'If they _____ earlier, they would have arrived on time.', options: ['leave', 'left', 'had left', 'have left'], answer: 2 },
                    { question: 'If you _____ me, I will help you.', options: ['ask', 'asked', 'had asked', 'will ask'], answer: 0 },
                    { question: 'If he were here, he _____ help us.', options: ['will', 'would', 'can', 'could'], answer: 1 },
                    { question: 'If it _____ tomorrow, we will cancel the trip.', options: ['rain', 'rains', 'rained', 'would rain'], answer: 1 }
                ]
            },
            'passive-voice': {
                title: 'Passive Voice Quiz',
                questions: [
                    { question: 'The letter _____ by her yesterday.', options: ['writes', 'wrote', 'was written', 'is written'], answer: 2 },
                    { question: 'English _____ in many countries.', options: ['speaks', 'spoke', 'is spoken', 'was spoken'], answer: 2 },
                    { question: 'The house _____ built in 1990.', options: ['is', 'was', 'were', 'are'], answer: 1 },
                    { question: 'The book _____ being read by students.', options: ['is', 'was', 'are', 'were'], answer: 0 },
                    { question: 'The work _____ be finished tomorrow.', options: ['will', 'would', 'can', 'must'], answer: 0 },
                    { question: 'The car _____ washed every week.', options: ['is', 'was', 'are', 'were'], answer: 0 },
                    { question: 'The problem _____ solved by the team.', options: ['has been', 'have been', 'had been', 'will been'], answer: 0 },
                    { question: 'The movie _____ directed by Steven Spielberg.', options: ['is', 'was', 'are', 'were'], answer: 1 },
                    { question: 'The cake _____ made by my mother.', options: ['is', 'was', 'are', 'were'], answer: 1 },
                    { question: 'The windows _____ cleaned yesterday.', options: ['is', 'was', 'are', 'were'], answer: 3 }
                ]
            },
            'reported-speech': {
                title: 'Reported Speech Quiz',
                questions: [
                    { question: 'She said, "I am happy." ‚Üí She said she _____ happy.', options: ['is', 'was', 'were', 'am'], answer: 1 },
                    { question: 'He said, "I will come." ‚Üí He said he _____ come.', options: ['will', 'would', 'can', 'could'], answer: 1 },
                    { question: 'They said, "We are studying." ‚Üí They said they _____ studying.', options: ['are', 'were', 'was', 'is'], answer: 1 },
                    { question: '"Do you like coffee?" she asked. ‚Üí She asked if I _____ coffee.', options: ['like', 'liked', 'likes', 'liking'], answer: 1 },
                    { question: '"Where do you live?" he asked. ‚Üí He asked where I _____.', options: ['live', 'lived', 'lives', 'living'], answer: 1 },
                    { question: '"Close the door," she said. ‚Üí She told me _____ the door.', options: ['close', 'to close', 'closing', 'closed'], answer: 1 },
                    { question: 'She said, "I can swim." ‚Üí She said she _____ swim.', options: ['can', 'could', 'may', 'might'], answer: 1 },
                    { question: '"Don\'t be late," he said. ‚Üí He told me _____ late.', options: ['don\'t be', 'not be', 'not to be', 'to not be'], answer: 2 },
                    { question: 'He said, "I have finished." ‚Üí He said he _____ finished.', options: ['has', 'have', 'had', 'having'], answer: 2 },
                    { question: 'She said, "I will help you." ‚Üí She said she _____ help me.', options: ['will', 'would', 'can', 'could'], answer: 1 }
                ]
            },
            'relative-clauses': {
                title: 'Relative Clauses Quiz',
                questions: [
                    { question: 'The man _____ lives next door is a doctor.', options: ['who', 'which', 'whose', 'whom'], answer: 0 },
                    { question: 'The book _____ I bought is interesting.', options: ['who', 'which', 'whose', 'whom'], answer: 1 },
                    { question: 'The girl _____ bag was stolen is crying.', options: ['who', 'which', 'whose', 'whom'], answer: 2 },
                    { question: 'The man _____ I met yesterday is my teacher.', options: ['who', 'which', 'whose', 'whom'], answer: 3 },
                    { question: 'This is the house _____ I was born.', options: ['where', 'which', 'that', 'when'], answer: 0 },
                    { question: 'The woman _____ called you is my sister.', options: ['who', 'which', 'whose', 'whom'], answer: 0 },
                    { question: 'The car _____ is parked outside is mine.', options: ['who', 'which', 'whose', 'whom'], answer: 1 },
                    { question: 'I know a man _____ son is a famous actor.', options: ['who', 'which', 'whose', 'whom'], answer: 2 },
                    { question: 'The movie _____ we watched was boring.', options: ['who', 'which', 'whose', 'whom'], answer: 1 },
                    { question: 'The teacher _____ teaches us is very kind.', options: ['who', 'which', 'whose', 'whom'], answer: 0 }
                ]
            },
            'subjunctive': {
                title: 'Subjunctive Mood Quiz',
                questions: [
                    { question: 'I suggest that he _____ more careful.', options: ['is', 'be', 'was', 'were'], answer: 1 },
                    { question: 'It is important that she _____ on time.', options: ['is', 'be', 'was', 'were'], answer: 1 },
                    { question: 'The doctor recommends that he _____ this medicine.', options: ['takes', 'take', 'took', 'taken'], answer: 1 },
                    { question: 'If I _____ you, I would accept the offer.', options: ['am', 'was', 'were', 'be'], answer: 2 },
                    { question: 'It is essential that everyone _____ the rules.', options: ['understands', 'understand', 'understood', 'understanding'], answer: 1 },
                    { question: 'She insists that we _____ early.', options: ['arrives', 'arrive', 'arrived', 'arriving'], answer: 1 },
                    { question: 'I wish I _____ taller.', options: ['am', 'was', 'were', 'be'], answer: 2 },
                    { question: 'It is necessary that he _____ the project.', options: ['finishes', 'finish', 'finished', 'finishing'], answer: 1 },
                    { question: 'They demand that she _____ immediately.', options: ['leaves', 'leave', 'left', 'leaving'], answer: 1 },
                    { question: 'If he _____ here, he would help us.', options: ['is', 'was', 'were', 'be'], answer: 2 }
                ]
            }
        };

        // Get topic from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const topic = urlParams.get('topic') || 'simple-present';

        let currentQuiz = quizData[topic] || quizData['simple-present'];
        let currentQuestion = 0;
        let userAnswers = [];
        let score = 0;

        // Initialize quiz
        function initQuiz() {
            document.getElementById('quizSubtitle').textContent = currentQuiz.title;
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            showQuestion();
        }

        // Show current question
        function showQuestion() {
            const question = currentQuiz.questions[currentQuestion];
            const container = document.getElementById('questionContainer');

            let html = `
                <h2 class="question-text">Question ${currentQuestion + 1} of ${currentQuiz.questions.length}</h2>
                <h3 class="question-text" style="font-size: 1.8rem; margin-bottom: 2rem;">${question.question}</h3>
                <form id="quizForm">
                    <div class="answer-options">
            `;

            question.options.forEach((option, index) => {
                const checked = userAnswers[currentQuestion] === index ? 'checked' : '';
                html += `
                    <div class="answer-option">
                        <input type="radio" id="answer${index}" name="answer" value="${index}" ${checked} onchange="saveAnswer(${index})">
                        <label for="answer${index}" class="answer-label">
                            <div class="radio-custom"></div>
                            <div class="answer-text">${option}</div>
                        </label>
                    </div>
                `;
            });

            html += `
                    </div>
                </form>
            `;

            container.innerHTML = html;
            updateNavigationButtons();
        }

        // Save user answer
        function saveAnswer(answerIndex) {
            userAnswers[currentQuestion] = answerIndex;
        }

        // Update navigation buttons
        function updateNavigationButtons() {
            document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'inline-block' : 'none';
            document.getElementById('nextBtn').style.display = currentQuestion < currentQuiz.questions.length - 1 ? 'inline-block' : 'none';
            document.getElementById('submitBtn').style.display = currentQuestion === currentQuiz.questions.length - 1 ? 'inline-block' : 'none';
        }

        // Next question
        function nextQuestion() {
            if (currentQuestion < currentQuiz.questions.length - 1) {
                currentQuestion++;
                showQuestion();
            }
        }

        // Previous question
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // Submit quiz
        function submitQuiz() {
            // Check if all questions are answered
            if (userAnswers.includes(null)) {
                alert('Please answer all questions before submitting!');
                return;
            }

            // Calculate score
            score = 0;
            currentQuiz.questions.forEach((question, index) => {
                if (userAnswers[index] === question.answer) {
                    score++;
                }
            });

            // Show results
            showResults();
        }

        // Show results
        function showResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.querySelector('.quiz-navigation').style.display = 'none';

            const resultContainer = document.getElementById('resultContainer');
            const percentage = (score / currentQuiz.questions.length) * 100;

            let message = '';
            if (percentage >= 80) {
                message = 'Excellent! You have mastered this topic! üéâ';
            } else if (percentage >= 60) {
                message = 'Good job! Keep practicing to improve! üëç';
            } else {
                message = 'Keep studying! You can do better! üí™';
            }

            document.getElementById('resultTitle').textContent = 'Quiz Results';
            document.getElementById('resultScore').textContent = `Your Score: ${score} / ${currentQuiz.questions.length} (${percentage.toFixed(0)}%)`;
            document.getElementById('resultMessage').textContent = message;

            resultContainer.style.display = 'block';
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = new Array(currentQuiz.questions.length).fill(null);
            score = 0;

            document.getElementById('questionContainer').style.display = 'block';
            document.querySelector('.quiz-navigation').style.display = 'flex';
            document.getElementById('resultContainer').style.display = 'none';

            showQuestion();
        }

        // Initialize quiz when page loads
        window.onload = initQuiz;
    </script>
</body>

</html>